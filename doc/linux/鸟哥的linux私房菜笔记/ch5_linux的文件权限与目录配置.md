# 第五章, linux的文件权限和目录配置

## 使用者与群组
1.  文件拥有者(user)
2.  群组(group):每个群组中有若干组员, 群组中的文件可以由所有该组的组员共享, 其他组的成员无法共享
3.  其他人(others)
- 一般情况下, 所有系统账号和使用者还有root的信息是记录在/etc/passwd中的  

- 个人密码是记录在/etc/shadow文件中  

- 所有的群组名称记录在/etc/group中
## linux文件权限概念
当查看文件详细信息时, 查看到的属性依次是
**|权限|链接|拥有者|群组|文件大小|修改日期|文件名|**
-   权限  

    第一个字符代表文件类型
    | 选项 | 类型             |
    |------|------------------|
    | d    | 目录             |
    | \-   | 文件             |
    | l    | 链接文件         |
    | b    | 可存储的周边文件 |
    | c    | 序列设备文件     |

    接下来的字符中, 三个为一组, r:可读, w:可写, x:可执行  
    - 第一组是文件拥有者可具备的权限  
    - 第二组是群组的权限  
    - 第三组是其他人的权限  
-   第二栏表示有多少文件名链接到此节点
-   第三栏表示这个文件拥有者账号
-   第四栏表示文件所属群组
-   第五栏表示容量大小
-   第六栏表示修改日期
-   第七组是文件名

|  root是不受文件权限限制的|

### 如何改变文件属性与权限
-   chgrp:改变文件所属的群组  
-   chown:改变文件拥有者  
-   chmod:改变文件的权限
```shell
chgrp 选项 群组名 dirname/filename
选项:
-R  递回改变

chown 选项 账号名[:群组名] 文件/目录名
选项
-R  递回改变

chmod 选项 xyz 文件/目录名
选项:
-R  递回改变
xyz:
r:4, w:2, x:1
```


### 目录和文件的权限的意义
目录:  
- r:表示拥有读取这个目录下的文件名称的权力
- w:表示拥有改变这个目录的结构清单的权力
- x:表示拥有进入这个目录的权力

### linux文件种类和拓展名
1.  文件种类
    -   正规文件:  
        -   纯文本文件:可以直接读取的文件  
        -   二进制文件:可以执行的文件
        -   数据格式文件:某些储存数据的特定格式的文件
    -   目录
    -   链接文件
    -   设备与设备文件:
        -   区块设备文件:可以存储数据设备的文件
        -   字符设备文件:一次性读取的设备的文件, 如键盘鼠标等
    -   数据接口文件:被用在网络上用来数据承接
    -   数据传送文件:
2.  文件拓展名
   拓展名对于linux来说没有什么意义, 旨在让用户可以区分
    -   #.sh:脚本和批处理文件
    -   Z, .tar, .tar.gz, .zip, #.tgz:经打包的压缩文件
    -   .html, .php:网页相关文件

## linux目录配置
linux目录配置的依据是FHS标准(Filesystem Hierarchy Standard)
|          | 可分享的                  | 不可分享的            |
|----------|---------------------------|-----------------------|
| 不变的   | /usr(软件放置处)          | /etc(配置文件)        |
|          | /opt(第三方协力软件)      | /boot(开机与核心文件) |
| 可变动的 | /var/mail(使用者邮件信箱) | /var/run(程序相关)    |
|          | /var/spool/news(新闻群组) | /var/lock(程序相关)   |

-   根目录的意义和内容  
    根目录下应该有这些文件存在  
    | 目录                  | 应放置文件内容                                                                                          |
    |-----------------------|---------------------------------------------------------------------------------------------------------|
    | FHS要求必须存在的   |                                                                                                         |
    | /bin                  | 放置一些可执行文件, 主要是指令                                                                          |
    | /boot                 | 放置开机后会使用到的文件                                                                                |
    | /dev                  | 放置连接的一些设备                                                                                      |
    | /etc                  | 放置几乎所有的配置文件                                                                                  |
    | /lib                  | 放置开机时会用到的函数库还有/bin和/sbin指令中会调用的函数库                                             |
    | /media                | 放置可移除的设备                                                                                        |
    | /mnt                  | 暂时挂载某个设备                                                                                        |
    | /opt                  | 第三方协力软件存放的目录                                                                                |
    | /run                  | 存放开机后会产生的各项信息                                                                              |
    | /sbin                 | 开机过程中所需要的命令, 包括开机, 修复, 还原系统等                                                      |
    | /srv                  | 一些网络服务启动后, 这些服务所需要取用的数据目录                                                        |
    | /tmp                  | 让一般使用者或正在执行的程序暂时放置文件的地方, 任何人都可以存取, FHS建议开机时将这个目录下的数据都删除 |
    | FHS建议可以存在       |                                                                                                         |
    | /home                 | 系统默认使用者的文件夹                                                                                  |
    | /lib\<qual>           | 存放与/lib不同的格式的二进制函数库                                                                      |
    | /root                 | root的主文件夹                                                                                          |
    | 一些其他的目录        |                                                                                                         |
    | /lost+found           | 当文件系统发生错误时, 将一些遗失的片段放在这个里面                                                      |
    | /proc                 | 虚拟文件系统, 放置的数据都是在内存当中                                                                  |
    | /sys                  | 虚拟的文件系统, 主要记录核心和系统硬件信息相关的信息                                                    |

-   /usr的意义与内容  

    Unix Software Resource的缩写, 也就是Unix操作系统软件资源, 所有软件数据都应该在该目录的次目录有序排放  

    /usr的次目录建议有下面这些  
    | 目录            | 应放置文件内容                                         |
    |-----------------|--------------------------------------------------------|
    | FHS要求必须存在 |                                                         |
    | ./bin           | 所有一般用户可以使用的指令, 另外此目录下不应该有子目录 |
    | ./lib           | 与/lib功能相似, /lib链接到此目录                       |
    | ./local         | 系统管理员在本机自行安装的软件建议安装在此目录         |
    | ./sbin          | 非系统正常运行所需要的系统指令                         |
    | ./share         | 主要放置只读架构的数据文件, 也包括共享文件             |
    | FHS建议可以存在|                                                          |
    | ./games         | 游戏相关的数据放置处                                   |
    | ./include       | 程序语言header和include放置处                          |
    | ./libexec       | 某些不被一般使用者惯用的可执行文件或脚本               |
    | ./src           | 一般源代码                                             |
    | ./lib\<qual>/   | 与lib\<qual>功能相同, 后者链接到此                     |

-   /var的意义与内容

    主要针对常态化变动的文件, 包括高速缓存, 登陆文件以及某些软件运行产生的文件等
    | 目录                  | 应放置文件内容                                               |
    |-----------------------|--------------------------------------------------------------|
    | FHS要求必须存在    |                                                              |
    | ./cache               | 应用程序本身运行过程会产生的一些暂存盘                       |
    | ./lib                 | 程序本身执行的过程中, 需要用到的数据文件放置的目录           |
    | ##./log#             | 登录文件放置的目录, 里面有重要的信息                         |
    | ./lock                | 确保该设备只能给单一软件使用                                 |
    | ./mail                | 放置个人邮件信箱                                             |
    | ./run                 | 某些程序或服务启动后, 会将他们的PID放置在此目录              |
    | ./spool               | 放一些伫列数据(排队等待其他程序使用的数据), 数据被使用后删除 |
